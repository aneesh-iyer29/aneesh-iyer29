<!DOCTYPE HTML>
<html>
<head>
  <title>Aneesh Iyer - Georgia Tech</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="assets/css/main.css" />
</head>
<body class="is-preload">

  <!-- Wrapper -->
  <div id="wrapper">

    <!-- Main -->
    <div id="main">
      <div class="inner">

        <!-- Dynamic header include -->
        <div id="header-container"></div>

        <!-- Content -->
        <section>
          <header class="main">
            <h1>Generic</h1>
          </header>

          <span class="image main"><img src="images/pic11.jpg" alt="" /></span>

          <p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus...</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis dapibus rutrum facilisis...</p>
          <p>Interdum et malesuada fames ac ante ipsum primis in faucibus...</p>

          <hr class="major" />
          <h2>Interdum sed dapibus</h2>
          <p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus...</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>

          <hr class="major" />
          <h2>Magna etiam veroeros</h2>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
          <p>Interdum et malesuada fames ac ante ipsum primis in faucibus...</p>

          <hr class="major" />
          <h2>Lorem aliquam bibendum</h2>
          <p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus...</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit...</p>
        </section>

        <!-- Filter Section -->
        <section id="so-resources">
          <header class="main">
            <h2>Science Olympiad Resources</h2>
          </header>

          <!-- Filter controls -->
          <div style="display:flex; gap:10px; margin-bottom:15px;">
            <select id="yearFilter">
              <option value="all">All Years</option>
              <option value="2025">2025</option>
              <option value="2024">2024</option>
              <option value="2023">2023</option>
            </select>

            <select id="eventFilter">
              <option value="all">All Events</option>
              <option value="astronomy">Astronomy</option>
              <option value="codebusters">Codebusters</option>
              <option value="optics">Optics</option>
              <option value="chemistry">Chemistry</option>
            </select>
          </div>

          <!-- Items to filter -->
          <div id="itemsList">
            <div class="item" data-year="2025" data-event="astronomy">
              <h3>2025 Lexington Invitational - Astronomy C (April 2025)</h3>
              <p>contact me for exam!</p>
            </div>
            <div class="item" data-year="2025" data-event="codebusters">
              <h3>2025 Lexington Invitational - Codebusters C (April 2025)</h3>
              <p><a href="#">exam</a> | <a href="#">key</a></p>
            </div>
            <div class="item" data-year="2024" data-event="optics">
              <h3>2024 MIT Invitational - Optics C (Jan 2024)</h3>
              <p><a href="#">exam</a> | <a href="#">key</a></p>
            </div>
            <div class="item" data-year="2023" data-event="chemistry">
              <h3>2023 Nationals - Chemistry Lab C (May 2023)</h3>
              <p><a href="#">exam</a> | <a href="#">key</a></p>
            </div>
          </div>
        </section>

        <!-- Filter Logic -->
        <script>
          document.addEventListener("DOMContentLoaded", function () {
            const yearFilter = document.getElementById("yearFilter");
            const eventFilter = document.getElementById("eventFilter");
            const items = document.querySelectorAll("#itemsList .item");

            function applyFilters() {
              const yearValue = yearFilter.value;
              const eventValue = eventFilter.value;

              items.forEach(item => {
                const matchYear = (yearValue === "all" || item.dataset.year === yearValue);
                const matchEvent = (eventValue === "all" || item.dataset.event === eventValue);
                item.style.display = matchYear && matchEvent ? "block" : "none";
              });
            }

            yearFilter.addEventListener("change", applyFilters);
            eventFilter.addEventListener("change", applyFilters);
            applyFilters(); // Initial filter
          });
        </script>

      </div>
    </div>

    <!-- Dynamic footer include -->
    <div id="sidebar" class="sidebar"></div>

  </div>

  <!-- Core Scripts -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/browser.min.js"></script>
  <script src="assets/js/breakpoints.min.js"></script>
  <script src="assets/js/util.js"></script>

  <!-- Dynamic HTML Loader & Sidebar Logic -->
  <script>
    async function loadHTML(id, file) {
      try {
        const response = await fetch(file);
        if (!response.ok) throw new Error(`Failed to load ${file}`);
        document.getElementById(id).innerHTML = await response.text();
      } catch (err) {
        console.error(err);
      }
    }

    async function init() {
      await Promise.all([
        loadHTML("header-container", "header.html"),
        loadHTML("sidebar", "footer.html"),
      ]);

      // Load main.js only after header/footer are in place
      const script = document.createElement("script");
      script.src = "assets/js/main.js";
      script.onload = () => {
        // Re-trigger scroll events if they exist
        if (window.scrollEvents) {
          requestAnimationFrame(() => {
            for (const fn of window.scrollEvents) {
              try {
                fn();
              } catch (e) {
                console.error("Scroll event error:", e);
              }
            }
          });
        }
      };
      document.body.appendChild(script);
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>

</body>
</html>
